## Алгоритм расчёта остаточного ресурса подшипника при переменных нагрузках и скоростях (по правилу Минера) 

Что нам нужно учитывать:
- Радиальная и осевая нагрузки в каждом режиме: $F_{r_i}$ и $F_{a_i}$
- Частота вращения в об/мин: $n_i$
- Время работы в каждом режиме: $t_i$ (миллисекунды)

**Предварительная обработка входных данных**
--

**1. Инициализация фильтров**  
Для каждого ключевого параметра создаётся независимый фильтр:

- **Радиальная нагрузка:**
$F_{r_{filtered}} = F_{r_1} , \delta_{F_r} = 0 $

- **Осевая нагрузка:**
$F_{a_{filtered}} = F_{a_1} , \delta_{F_a} = 0 $

- **Частота вращения**
$n_{filtered} = n_1 , \delta_n = 0 $

где:
- $F_{r_{filtered}}$ - последнее значимое значение

    **Общие параметры:**

    - Коэффициент интегрирования: $K_{int}$
    - Порог срабатывания $threshold$

**2. Алгоритм фильтрации для каждого параметра**

Для каждого нового измерения i:

1) **Для радиальной нагрузки**

- Вычисляем дельту:

$$ \delta_{F_{r_i}} = \delta_{F_{r_{i-1}}} + |F_{r_{filtered}} - F_{r_i}| \cdot K_{int}$$

- Проверка порога: если 

 $$ \delta_{F_{r_i}} > threshold $$

- **Итог**:

$$ F_{r_{filtered}} =F_{r_i} ,  \delta_{F_{r_i}} = 0 $$

2) **Для осевой нагрузки(аналогично)**

$$ \delta_{F_{a_i}} = \delta_{F_{a_{i-1}}} + |F_{a_{filtered}} - F_{a_i}| \cdot K_{int}$$

3) **Для часототы вращения**

-  учет времени работы $t_i$

 $$ \delta_{n_i} = \delta_{n_{i-1}} + |n_{filtered} - n_i| \cdot  \frac {t_i}{t_{ref}} \cdot K_{int}  $$

 - проверка порога: если 

 $$ \delta_{n_{i}} > threshold$$

 - **Итог** 
 $$n_{filtered} = n_i , \delta_{n_i} = 0$$

Пояснение 
- Для n добавлен множитель $\frac {t_i}{t_{ref}} $, чтобы учитывать длительность влияния измения скорости. Например, если $t_{ref} = 1000мс$, а режим длился 200 мс, его вклад в дельту уменьшается в 5 раз

**3. Определение значимых режимов** 

Новый режим фиксируется, если хотя бы один из фильтров сработал (превысил порог). 
Параметры режима:

1. $F_{r_{filtered}}$,  $F_{a_{filtered}}$,   $n_{filtered}$

3. **Время работы:** сумма $t_i$ всех подрежимов между срабатываниями.




### Шаг 1. Разбиваем рабочий цикл на i режимов

Началом нового режима считаем момент времени, когда хотя бы один из входных (для алгоритма) параметров изменил свое значение.
 
Тогда первым изменением режима может например быть начало вращения - изменилась скорость вращения. 

А дальше по мере изменения скорости, нагрузки и других параметров происходит фиксация новых параметров режима и момент времени изменения режима.

**Пример**
- Входные данные:

|Режим | $F_{r_i}$ (Н) | $F_{a_i}$ (Н) | $n_i$ (об/мин) | $t_i$(мс)|
|------|---------------|---------------|----------------|------------|
| 0    | 300 |  50 |   0  |    0 |
| 1    | 300 |  50 |  100 |   50 |
| 2    | 500 |  50 | 1000 |  130 |
| 3    | 200 |  20 | 1800 |  300 |

### Шаг 2. Для каждого режима рассчитываем:

**1. Эквивалентную динамическую нагрузку:**

$$P_{r_i} = X \cdot F_{r_i} + Y \cdot F_{a_i}$$

$X, Y$ - для каждого режима будут разные в зависимости от сил $Fa, Fr$

**2. Номинальный ресурс(млн оборотов):**

$$L_{10_i} =  ( \frac{C_r}{P_{r_i}})^3$$

$Cr$ - динамическая грузопольемность, известная величина, берется из ГОСТа или каталога

**3. Допустимое число оборотов в режиме i:**

$$N_i = L_{10_i} \cdot 10^6$$

**4.Фактическое число оборотов в режиме i:**

Напоминание:  
$n_i$ — об/мин  
$t_i$ — миллисекунды  
В 1 минуте = 60 000 мс  

→ Поскольку частота вращения $n_i$ задана в оборотах в минуту (об/мин), для корректного расчёта фактического количества оборотов необходимо привести время $t_i$ из миллисекунд к минутам. 

$$минуты =  \frac{t_i (мс)}{60 000}$$

→ далее умножаем обороты в минуту на приведенное к минутам время

$$n_{факт_i} = n_i \cdot \frac{t_i }{60000} $$

**5. Ущерб (damage) в режиме i:**

$$D_i= \frac {n_{факт_i}}{N_i}$$

### Шаг 3. Суммарный износ по Минеру 

$$D = \sum_{i=1}^{k} \frac {n_{факт_i}}{N_i} $$ 

$D < 1$ → подшипник ещё работает

$D \geq 1$ → ресурс исчерпан, нужна замена

![alt text](image-1.png)
