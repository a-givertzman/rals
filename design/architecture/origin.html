<h2>Система мониторинга оборудования и палнирования ТО&nbsp;</h2>

<p>Компактная версия на гитхабе:&nbsp;https://github.com/a-givertzman/rals/issues/2</p>

<p>&nbsp;</p>

<ol>
	<li>
	<h2>Общие сведения</h2>
	</li>
</ol>

<p>Программное обеспечение рассчитано на масштаб предприятия и может объединять оборудование одного или нескольких цехов.</p>

<p>Все площадки и оборудование выстраиваются в древовидную структуру.</p>

<ol start="2">
	<li>
	<h2>Основные модули</h2>
	</li>
</ol>

<ul>
	<li>Система мониторинга текущего состояния оборудования
	<ul>
		<li>Отслеживание параметров режима работы в реальном времени</li>
		<li>Сбор исторических данных</li>
		<li>Анализ параметров режима работы оборудования</li>
		<li>Анализ вибрации</li>
		<li>Прогнозирование износа</li>
		<li>Рекомендации по внеплановому обслуживанию (в будущих версиях)</li>
	</ul>
	</li>
	<li>Планирование ТО
	<ul>
		<li>Обзор всего оборудования</li>
		<li>Типизация элементов оборудования</li>
		<li>Типизация задач ТО</li>
		<li>Планирование ТО и трудозатрат&nbsp;(базовые функции, не заменяет ERP)</li>
		<li>Подготовка спецификаций для закупок&nbsp;(Простые списки)</li>
	</ul>
	</li>
</ul>

<ol start="3">
	<li>
	<h2>Архитектура</h2>
	</li>
</ol>

<ul>
	<li><strong>Данные</strong>

	<ul>
		<li>Обмен с бэклм - на именованных событиях
		<ul>
			<li>Классификация событий
			<ul>
				<li>Inf - спонтанное событи (от бэка к фронту)</li>
				<li>Rec - запрос от фронта к бэку, требующий обязательного скорейшего ответа</li>
				<li>ReqCon - ответ с данными на запрос Rec</li>
				<li>ReqErr - ответ с ошибкой на запрос Rec</li>
				<li>Cmd - команда фронта бэку, не требует обязательного ответа (например кнопки Прибавит / Убавить - не требуют ответа)</li>
				<li>CmdCon - Необязательное положительное подтверждение команды Cmd (может быть использовано для интерфейсов, подразумевающих подверждение успешного выполнения команды)</li>
				<li>CmdErr - Необязательное отрицательное подтверждение команды Cmd</li>
			</ul>
			</li>
		</ul>
		</li>
		<li>Общие правила использования событий
		<ul>
			<li><em><strong>Req</strong></em>&nbsp;- для получения данных по <em><strong>Пользователям</strong></em>,&nbsp;<em><strong>Оборудованию</strong></em>, <em><strong>Работам</strong></em>, <em><strong>Документам</strong></em> и <em><strong>Подтверждениям</strong></em></li>
			<li><em><strong>Inf</strong></em>&nbsp;- для спонтанной передачи статусов <em><strong>Warn</strong></em> и <em><strong>Alarm</strong></em></li>
		</ul>
		</li>
		<li>Реконнект - автоматический
		<ul>
			<li>При обрывах и восстановлении связи обновляется статус в строке состояния</li>
			<li>А так же бэк пришлет события закэшенные для этой линии, если они вообще есть (при условии что подключение было восстановлено в пределах всего нескольких минут)</li>
			<li>Данные идущие по запросу останутся без изменений</li>
		</ul>
		</li>
	</ul>
	</li>
	<li><strong>Пользователи</strong>&nbsp;&nbsp;&nbsp;&nbsp;
	<ul>
		<li>Авторизация</li>
		<li>Группы
		<ul>
			<li>Админ
			<ul>
				<li>Полный доступ ко всем функциям систкемы (для разработчика и поставщика)</li>
			</ul>
			</li>
			<li>Инженер
			<ul>
				<li>Добавление, удаление Операторов</li>
				<li>Редактирует Оборудование</li>
				<li><s>Дает дополнительные разрешения Операторам</s> - Может реализуем в следующих версиях редактор ролей</li>
				<li>Планирование Работ</li>
				<li>Подтверждение закрытия работ</li>
			</ul>
			</li>
			<li>Оператор
			<ul>
				<li>Обзор всех функций системы</li>
				<li>Квитирование событий</li>
				<li>Для окончательного завершения работ необходима виза Инженера</li>
			</ul>
			</li>
		</ul>
		</li>
		<li>События безопасности логируются в общий список событий с классом Info
		<ul>
			<li>Авторизация пользователей</li>
			<li>Добавление / удаление пользователей</li>
			<li>Изменение прав пользователей</li>
			<li>Квитирование событий</li>
		</ul>
		</li>
	</ul>
	</li>
	<li><strong>Оборудование</strong> (дерево)
	<ul>
		<li>Импортировать из таблички
		<ul>
			<li>Дерево обычно небольшое, не будет превышать несколько тысяч записей, загружается целиком из базы в стейт фронтенда</li>
			<li>Узел дерева всегда имеет только одного родителя</li>
			<li>Из E-Plan в формате csv, делается разработчиком системы, не является функцией для конечного пользователя</li>
			<li>Примерный вид таблицы
			<table border="1" cellpadding="1" cellspacing="1" style="width:500px">
				<thead>
					<tr>
						<th scope="col">id</th>
						<th scope="col">parent_id</th>
						<th scope="col">name</th>
						<th scope="col">title</th>
						<th scope="col">param1</th>
						<th scope="col">param2</th>
						<th scope="col">...</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>1</td>
						<td>null</td>
						<td>
						<p data-pm-slice="1 1 []">АБВГ.XXXXXX.001</p>
						</td>
						<td>Кран мостовой</td>
						<td>height: 30m</td>
						<td>width: 40m</td>
						<td>&nbsp;</td>
					</tr>
					<tr>
						<td>2</td>
						<td>1</td>
						<td>
						<p data-pm-slice="0 0 []">АБВГ.XXXXXX.002</p>
						</td>
						<td>Лебедка главная</td>
						<td>length: 100m&nbsp;</td>
					</tr>
				</tbody>
			</table>
			</li>
			<li>id - уникальный признак в E-Plan</li>
			<li>&nbsp;parent_id - id родительского элемента</li>
			<li>name - Пректное наименование</li>
			<li>title - Человеческое название</li>
			<li>param&#39;s - необходимый набор технических параметров оборудования, определяется расчетами износа и инженером по ТО</li>
		</ul>
		</li>
		<li>Отобразить в виде дерева</li>
		<li>Характеристики оборудования</li>
		<li>Документы</li>
		<li>Графики ТО (список / календарь)
		<ul>
			<li>Работы по ТО планируются пользователем,
			<ul>
				<li>Внеплановые по заданным датам,</li>
				<li>Плановые ТО периодичностью</li>
			</ul>
			</li>
		</ul>
		</li>
		<li>Сигнализация (Класс, timestamp, Текст, Кометарий - можно вписать отвественного или что иное)
		<ul>
			<li>Пишется в историю</li>
			<li>Хранится 3..5 лет (по желанию заказчика настраивается разработчиком / наладчиком)</li>
			<li>Отображается в двух списках
			<ul>
				<li>Список событий - историческая хронология всех событий, может быть отфильтрована по датам, по Классу&nbsp; тревоги, по тексту</li>
				<li>Список тревог - список активных в данный момент тревог
				<ul>
					<li>Необходим для того что бы зафиксировать в области видимости важные критические события, особенно актуален когда общее количество событий достаточно большое и трудно оценить что там важно а что нет. События попавшие в список тревог ни куда не денуться до тех пор пока не будут ликвидированы их причины и они не будут подтверждены &quot;Сквитированы&quot; пользователем. Если причины тревоги не были устранены, то сквитировать такую тревогу невозможно. Таким образом список тревог в идеале должен быть пустым.</li>
					<li>Событие попадает в список тревог при наличии у него&nbsp;<strong>Флага Тревога:</strong></li>
					<li>В список Активных - пока имеет значение логической &quot;1&quot; (причины тревоги не устранены)
					<ul>
						<li>Активная аврия не может быть сквитирована - требует устранения</li>
						<li>Но можем дать возможность квитирования для <em><strong>Инженера</strong></em>, с автоматическим каким-то соментом и логированием в общую историю</li>
						<li>Или еще какой-то обходной путь сквитировать то что не устранить, но в списке мешает</li>
					</ul>
					</li>
					<li>В список Пролетевших - если значение измениться с &quot;1&quot; на &quot;0&quot; (причина тревоги устранена)
					<ul>
						<li>Будет удалено из пролетевших после квтирования</li>
						<li>Квитирование выполняется с подтверждением и по желанию может быть прокомментировано, событие квитирования пишется в общий лог</li>
						<li>Квитировать может Оператор, Инженер, Админ</li>
					</ul>
					</li>
				</ul>
				</li>
			</ul>
			</li>
			<li><strong>Классы тревоги</strong> событий сигнализации
			<ul>
				<li>Info | ℹ️ | Default | Информационное сообщение</li>
				<li>Warning | ⚠️ | Желтый | Предупредительная сигнализация, требует внимания персонала, не препятствует дальнейшей работе</li>
				<li>Error | ❌ | Error | Возможно нужно выделить ошибки (в приложении, связи, на бэкенде) в отдельную категорию</li>
				<li>Alarm | <strong><span style="background-color:null">◯</span></strong>&nbsp;| Красный | Аварийная сигнализация, требует срочной реакции персонала, дальнейшая работа невозможна</li>
			</ul>
			</li>
			<li>Степень износа
			<ul>
				<li>Ранняя стадия износа (класс тревоги в списках событий/тревог: Warning)</li>
				<li>Развитый дефект (класс тревоги в списках событий/тревог: Warning)</li>
				<li>Критический износ (класс тревоги в списках событий/тревог: Alarm, флаг Тревога)</li>
			</ul>
			</li>
			<li>Статус (Active / Archived)
			<ul>
				<li>По умолчанию оборудование имеет статус <em><strong>Active</strong></em></li>
				<li><em><strong>Archived</strong></em> - не отображаются в дереве оборудования</li>
				<li>Если оборудование удалено пользователем
				<ul>
					<li>Переводим статус удаленного узла и всех дочерних из <em><strong>Active</strong></em>&nbsp;в&nbsp;<em><strong>Archived</strong></em></li>
					<li>Связанные <em><strong>События</strong></em>, <em><strong>Работы</strong></em> и <em><strong>Отчеты</strong></em> - остаются и отображаются</li>
				</ul>
				</li>
				<li>
				<p>В будущих версиях: расширить статусами <em><strong>Service</strong></em>&nbsp;(Вывод в ремонт, ТО),&nbsp;<strong><em>Shutdown</em></strong> (Останов, вывод), и другими, а так же ввести понятие&nbsp;<em><strong>Downtime</strong></em>&nbsp;- время простоя</p>
				</li>
			</ul>
			</li>
		</ul>
		</li>
	</ul>
	</li>
	<li><strong>Виды работ</strong>
	<ul>
		<li>Могут иметь вложенность</li>
		<li>Примерный вид записи
		<ul>
			<li>Наименование</li>
			<li>Требования по периодичности ТО (как часть характеристик оборудования, определяется производителем, ГОСТом, другими нормативными документами)</li>
			<li>Обеспечение
			<ul>
				<li>Люди</li>
				<li>Материалы</li>
				<li>Прочие ресурсы</li>
			</ul>
			</li>
			<li>Дедлайн</li>
		</ul>
		</li>
		<li>Проверить и запретить циклы при сохранении</li>
	</ul>
	</li>
	<li><strong>Работа</strong>
	<ul>
		<li>Могут иметь вложенность (вложенность программно не ограничена, обычно не большая)</li>
		<li>Принадлежит одному узлу дерева оборудования
		<ul>
			<li>Создание работы
			<ul>
				<li>Может быть выбрана из Видов Работ (ссылаемся на вид работ, запись работы изначально пустая, все поля беруться из Вида. Поля, которые были изменены храняться в записи Работа, остально берется из Вида.&nbsp;</li>
				<li>Или создается новая (новая может быть добавлена в Виды работ)</li>
				<li>Работу можно назначить на дату</li>
				<li>На множество дат (Экземпляры работ автоматически создаются для множества дат)
				<ul>
					<li>Задав периодичность</li>
					<li>Задав диапазон дат</li>
				</ul>
				</li>
			</ul>
			</li>
		</ul>
		</li>
		<li>Исполнитель (дочерние наследуют родительского)</li>
		<li>Дедлайн (Дедлайн дочерних &lt;= Дедлайн родителя, проверяется при добавлении даботы)
		<ul>
			<li>При изменении дедлайна
			<ul>
				<li>Логировать изменение</li>
				<li>Пересчитать флаги <em><strong>Просрочено (</strong></em>флаг просрочено как обычно логируется<em><strong>)</strong></em></li>
			</ul>
			</li>
		</ul>
		</li>
		<li>Статус
		<ul>
			<li>Родительский статус вычисляются автоматиески</li>
			<li>Изменение статуса работ логируются в общую историю с классом Info</li>
		</ul>
		</li>
		<li>Проверить и запретить циклы при сохранении</li>
	</ul>
	</li>
	<li><strong>Статус Работы</strong>
	<ul>
		<li>Принадлежит одной записи Работа</li>
		<li>Статус
		<table border="1" cellpadding="1" cellspacing="1" style="width:500px">
			<thead>
				<tr>
					<th colspan="1" rowspan="2" scope="col" style="text-align: center;">Статус</th>
					<th scope="col">Переход в:</th>
					<th scope="col" style="width: 57px;">&nbsp;</th>
					<th scope="col" style="width: 70px;">&nbsp;</th>
					<th scope="col">&nbsp;</th>
					<th scope="col">&nbsp;</th>
					<th scope="col">&nbsp;</th>
				</tr>
				<tr>
					<th scope="col">Planned</th>
					<th scope="col" style="width: 57px;">InProgress</th>
					<th scope="col" style="width: 70px;text-align: center;">Paused</th>
					<th scope="col">Confirmation</th>
					<th scope="col">Completed</th>
					<th scope="col">Cancelled</th>
				</tr>
				<tr>
					<td>Planned</td>
					<td style="text-align:center">-</td>
					<td style="text-align:center; width:57px">Yes</td>
					<td style="text-align:center; width:70px">&nbsp;</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center">Yes</td>
				</tr>
				<tr>
					<td>InProgress</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center; width:57px">-</td>
					<td style="text-align:center; width:70px">Yes</td>
					<td style="text-align:center">Yes</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center">Yes</td>
				</tr>
				<tr>
					<td>Paused</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center; width:57px">Yes</td>
					<td style="text-align:center; width:70px">-</td>
					<td style="text-align:center">Yes</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center">Yes</td>
				</tr>
				<tr>
					<td>Confirmation</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center; width:57px">Yes</td>
					<td style="text-align:center; width:70px">&nbsp;</td>
					<td style="text-align:center">-</td>
					<td style="text-align:center">Yes</td>
					<td style="text-align:center">Yes</td>
				</tr>
				<tr>
					<td>Completed</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center; width:57px">&nbsp;</td>
					<td style="text-align:center; width:70px">&nbsp;</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center">-</td>
					<td style="text-align:center">&nbsp;</td>
				</tr>
				<tr>
					<td>Cancelled</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center; width:57px">&nbsp;</td>
					<td style="text-align:center; width:70px">&nbsp;</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center">&nbsp;</td>
					<td style="text-align:center">-</td>
				</tr>
			</thead>
		</table>

		<ul>
			<li>Правила агрегации (дочерний -&gt; родитель, <span style="color:#000000">приоритет сверху вниз</span>)

			<ul>
				<li><span style="color:#000000">Если есть Paused &rarr; Parent: Paused</span></li>
				<li><span style="color:#000000">Если есть Confirmation &rarr; Parent: Confirmation</span></li>
				<li><span style="color:#000000">Если есть InProgress &rarr; Parent: InProgress</span></li>
				<li><span style="color:#000000">Если все Completed &rarr; Parent: Completed</span></li>
				<li><span style="color:#000000">Если все Cancelled &rarr; Parent: Cancelled</span></li>
				<li><span style="color:#000000">Иначе Parent: Planned</span></li>
			</ul>
			</li>
		</ul>
		</li>
		<li>Флаг <em><strong>Просрочено</strong></em> (Родитель <em><strong>Просрочено</strong></em> если хоть один вложенный элемент <em><strong>Просрочено</strong></em>)
		<ul>
			<li>Установка флага логируются в общую историю с классом Warning</li>
			<li>Снятие флага логируются в общую историю с классом Info</li>
		</ul>
		</li>
		<li>Подтверждение <em><strong>Инженером</strong></em>
		<ul>
			<li>Исполнитель завершает -&gt; Статус&nbsp;<em><strong>Confirmation</strong></em></li>
			<li>Работа попадает в список &quot;На подтверждение&quot;</li>
			<li><em><strong>Инженер</strong></em> подтверждает:
			<ul>
				<li>Если подтверждено -&gt;&nbsp;Статус&nbsp;<em><strong>Completed</strong></em></li>
				<li>Если отклонено -&gt;&nbsp;Статус&nbsp;<em><strong>InProgress</strong></em></li>
			</ul>
			</li>
		</ul>
		</li>
		<li>Отчет</li>
		<li>Комментарий</li>
	</ul>
	</li>
	<li><strong>Закупка</strong>&nbsp;(Список деталей с артикулами и необходимыми для закупки характеристиками)
	<ul>
		<li>Принадлежит <strong>Работе</strong></li>
		<li>Статус
		<ul>
			<li>Формирование (дата, составил)</li>
			<li>Отправлено (дата, отправил)</li>
			<li>Закрыто (дата, получил)</li>
		</ul>
		</li>
		<li>Запись закупки
		<ul>
			<li>Код заказа</li>
			<li>Наименование</li>
			<li>Количество</li>
		</ul>
		</li>
	</ul>
	</li>
	<li><strong>Отчет по Работе</strong>
	<ul>
		<li>Принадлежит одной записи Статус Работы</li>
		<li>Описание</li>
		<li>Фотографии</li>
	</ul>
	</li>
</ul>

<ol start="4">
	<li>
	<h2>Бэкенд</h2>
	</li>
</ol>

<ul>
	<li>Работает как сервис</li>
	<li>Опрашивает подключенные устройства
	<ul>
		<li>Пром-контроллеры (Profinet / SLMP)</li>
		<li>Датчики виброаналитики (UDP)</li>
	</ul>
	</li>
	<li>Собирает и обрабатывает информацию
	<ul>
		<li>Пишет историю по событиям</li>
		<li>Расчитывает износ оборудования</li>
		<li>Аналитике по датчикам вибрации
		<ul>
			<li>Датчики вибрации подключены по UDP к бэкенду (Микросервис UDP-Client)
			<ul>
				<li>Передают выборки с АЦП с частотой семплирования около 300 кГц</li>
			</ul>
			</li>
			<li>Микросервис UDP-Client Собирает все выборки с подключенных датчиков
			<ul>
				<li>Выполняет FFT для каждой выборки</li>
				<li>Массив результатов FFT&nbsp;поступает на фильтры (индивидуальный Threshold-фильтр, отсекающий несущественные колебания амплитуды)</li>
				<li>После фильтрации результаты FFT имеющие существенные изменения попадают в таблицу &quot;day&quot; БД (timestamp, freq, amp) для дальнейшей фильтрации</li>
				<li>Отдельно сохраняем
				<ul>
					<li>Высокочастотные (Зарождение дефекта (микротрещины, поверхностная усталость))
					<ul>
						<li>Собственные частоты элементов подшипника 1 .. 5 кГц (независимо от частоты вращения вала)</li>
						<li>Резонансные частоты датчика и корпуса 10 .. 30 кГц (High Frequency Detection (HFD), Shock Pulse Method (SPM) - метод ударных импульсов)</li>
						<li>Спектр огибающей (Envelope Spectrum)
						<ul>
							<li>Полосовой фильтр к области 20&ndash;40 кГц</li>
							<li>&laquo;Снять огибающую&raquo;,</li>
							<li>Проверить наличие импульсов, следующие с частотами BPFO или BPFI</li>
						</ul>
						</li>
					</ul>
					</li>
					<li>FTF - Частота сепаратора (Fundamental Train Frequency)</li>
					<li>BPFI - Частота дефекта внутреннего кольца (Ball Pass Freq. Inner)</li>
					<li>BPFO - Частота дефекта наружного кольца (Ball Pass Freq. Outer)</li>
					<li>BSF - Частота дефекта тела качения (Ball Spin Frequency)</li>
					<li>&nbsp;</li>
				</ul>
				</li>
			</ul>
			</li>
			<li>Микросервис Аналитика Вибрации
			<ul>
				<li>Микросервис&nbsp;фильтрации
				<ul>
					<li>Запускается периодически
					<ul>
						<li>Раз в 24 часа
						<ul>
							<li>все записи из таблички day филтруются от периодических составляющих (с настройками перодов 1), результаты попадают в таблицу week</li>
						</ul>
						</li>
						<li>Раз в 7 дней
						<ul>
							<li>Все записи из таблички week филтруются от периодических составляющих (с настройками перодов 2), результаты попадают в таблицу month</li>
						</ul>
						</li>
						<li>Раз в 30 дней
						<ul>
							<li>Все записи из таблички month филтруются от периодических составляющих (с настройками перодов 2), результаты попадают в таблицу year</li>
						</ul>
						</li>
						<li>Раз в 360 дней
						<ul>
							<li>Все записи из таблички month филтруются от периодических составляющих (с настройками перодов 2), результаты попадают в таблицу va-trend</li>
						</ul>
						</li>
					</ul>
					</li>
				</ul>
				</li>
				<li>Микросервис Аналитики
				<ul>
					<li>Запускается по запросу фронтенда</li>
				</ul>
				</li>
			</ul>
			</li>
			<li>Степень износа
			<ul>
				<li>Ранняя стадия: Появление высокочастотных составляющих (ультразвук) и гармоник. (Warning)</li>
				<li>Развитый дефект: Появление выраженных пиков на основных частотах и их гармониках (2x, 3x BPFO). (Alarm)</li>
				<li>Критический износ: Рост &laquo;шумового порога&raquo; (noise floor) и исчезновение четких пиков из-за хаотичного биения. (Alarm)</li>
			</ul>
			</li>
		</ul>
		</li>
	</ul>
	</li>
	<li>Отправляет текущие значения износа и сигнализации клиентам</li>
	<li>Слушает события от фронтенда
	<ul>
		<li>Выполняет команды</li>
		<li>Отвечает на запросы</li>
	</ul>
	</li>
</ul>

<ol start="5">
	<li>
	<h2>Фронтенда</h2>
	</li>
</ol>

<ul>
	<li><strong>Данные</strong>

	<ul>
		<li>Обмен с бэкендом на именованных событиях (Inf, Rec, ReqCon, ReqErr, Cmd, CmdCon, CmdErr)</li>
		<li>Реконнект - автоматический, обновление <em><strong>Статуса</strong></em></li>
	</ul>
	</li>
	<li><strong>Пользователи</strong>
	<ul>
		<li>Авторизация</li>
		<li>Регистрация нового пользователя</li>
		<li>Управление пользователями</li>
	</ul>
	</li>
	<li><strong>Page | Главный экран</strong>
	<ul>
		<li><strong>Оборудование</strong> (Дерево на панели слева)
		<ul>
			<li>Узел дерева
			<ul>
				<li>Статус (Обобщает Статус Виброаналитики, износа, ТО)
				<ul>
					<li>Red icon - Alarm (красный)</li>
					<li>Warning icon<span>&nbsp;-&nbsp;</span>Warning (желтый)</li>
					<li>⏰ -&nbsp;Просрочка ТО</li>
				</ul>
				</li>
				<li>Наименование</li>
			</ul>
			</li>
			<li>Узел дерева можно добавить в Работе -&gt; Закупка</li>
		</ul>
		</li>
		<li><strong>Мониторинг</strong>&nbsp;<strong>оборудования</strong>&nbsp;(Центральная часть -&gt; Вкладка <strong>Мониторинг</strong>)
		<ul>
			<li>Сделать неактивной если нечего показать</li>
			<li>Параметры текущего режима работы, если есть&nbsp;</li>
			<li>Информация по износу и виброаналитике, если есть</li>
		</ul>
		</li>
		<li><strong>Характеристики оборудования</strong> (Центральная часть -&gt; Вкладка <strong>Характеристики</strong>)
		<ul>
			<li>Список полей (ключ - значение), как вариант можно отобразить в таблице
			<ul>
				<li>Ключ - уникальный для одного узла, отображдаемый текст и перевод формируются из ключа и храняться в БД в таблице переводов</li>
				<li>Типв значений - хранится в БД вместе со значением</li>
			</ul>
			</li>
			<li>Таблицы</li>
			<li>Редактирование при наличии прав&nbsp;</li>
		</ul>
		</li>
		<li><strong>Документы</strong> (Центральная часть -&gt; Вкладка <strong>Документы</strong>)
		<ul>
			<li>Список приложенных документов</li>
			<li>Просмотр выбранного (HTML - в окне приложения / PDF - желательно во встоенном PDF-viewer)</li>
			<li>Добавление документа</li>
			<li>Удаление документа</li>
		</ul>
		</li>
		<li><strong>Графики ТО</strong> (список)&nbsp;(Центральная часть -&gt; Вкладка Сервис)
		<ul>
			<li>Отображение работ в таблице (видны только корневые задачи, вложенные можно открыть по клику в отдельном окне <strong>Навигатор-Редактор Работ</strong>)
			<ul>
				<li>Фильтр &quot;По умолчанию&quot; :
				<ul>
					<li>Сначала&nbsp;<em><strong>Просроченные</strong></em>&nbsp;работы с иконкой&nbsp;⏰</li>
					<li>Потом <em><strong>InProgress, Paused, Confirmation</strong></em></li>
					<li>Ниже работы <em><strong>Planned</strong></em>
					<ul>
						<li>5..1 дней<em>&nbsp;до<strong> Просрочке</strong></em>&nbsp; - подсветить цветом Warning</li>
					</ul>
					</li>
				</ul>
				</li>
				<li>Фильтр по статусу, по флагам, по исполнителю</li>
			</ul>
			</li>
			<li>Добавление работ (отобразить вложенным списком)
			<ul>
				<li>Добавление Работ из списка Видов работ</li>
				<li>Кастомизация списка работ (<strong>Редактор Работ</strong>)</li>
				<li>На конкретную дату или с периодичностью&nbsp;</li>
				<li>Можно назначить исполнителя</li>
			</ul>
			</li>
			<li>Ведение работ
			<ul>
				<li>Показать работу вложенным списком (treeview)</li>
				<li>Можно назначить исполнителя</li>
				<li>Можно изменить статус
				<ul>
					<li>При Отмене запросить комментарий</li>
					<li>При Завершении запросить отчет
					<ul>
						<li>Описание - текст</li>
						<li>Приложить файл (Изображение / документ)</li>
					</ul>
					</li>
				</ul>
				</li>
				<li>Можно сформировать Закупку (Список деталей с артикулами и необходимыми для закупки характеристиками)
				<ul>
					<li>Можно добавить запись сформированную из узла дерева Оборудования, с явным ручным указанием вложенных елементов</li>
					<li>Можно добавить вручную</li>
					<li>Статус&nbsp;(Формирование / Отправлено / Закрыто)
					<ul>
						<li><s>Опционально статус можно указать записям закупки&nbsp;(Черновик / Отправлено / Закрыто)</s> - Может быть в будущих версиях</li>
					</ul>
					</li>
				</ul>
				</li>
			</ul>
			</li>
		</ul>
		</li>
	</ul>
	</li>
	<li><strong>Page | 3D View</strong>
	<ul>
		<li>Обзор модели оборудования</li>
		<li>Индикачия режима, износа и виброаналитика цветными лампочками рядом с соответствующим узлом оборудования</li>
		<li>Индикация тревог (иконка, цвет, мерцание)</li>
		<li>Переход между 3D и деревом: правый клик -&gt; Показать в 3D / Дереве&nbsp;</li>
	</ul>
	</li>
	<li><strong>Widget | Строка состояния</strong> (мини&nbsp;Dashboard)
	<ul>
		<li>Обновляется в реальном времени</li>
		<li>Иконки фиксированной ширины (не зависимо от контента)
		<ul>
			<li>Когда количество 0, поле есть , но пустое, имеет цвет фона, не привлекает внимания</li>
		</ul>
		</li>
		<li>Количество активных тревог
		<ul>
			<li>Warn - желтый</li>
			<li>Alarm - красный (и возможно мерцает первые N секунда - задать в конфиг файле)</li>
		</ul>
		</li>
		<li>Количество просроченных Работ</li>
		<li>Количество работ на подтверждении</li>
		<li>Статус связи с бэком</li>
	</ul>
	</li>
	<li><strong>Page | Сигнализация</strong>
	<ul>
		<li>Вкладка События
		<ul>
			<li>Отображает события в таблице</li>
			<li>Позволяет фильтровать по
			<ul>
				<li>По умолчанию последние 24 часа</li>
				<li>По оборудованию</li>
				<li>По работе</li>
				<li>По пользователю</li>
				<li>По ...</li>
			</ul>
			</li>
		</ul>
		</li>
		<li>Вкладка Аварии
		<ul>
			<li>Отображает два списка
			<ul>
				<li>Активные аварии - события, имеющие Класс аварии и имеющие в данный момент логическое значение &quot;1&quot;
				<ul>
					<li>Сортировать по Классу + дате</li>
				</ul>
				</li>
				<li>Пролетевшие аварии события, имеющие Класс аварии и сменившие логическое значение с &quot;1&quot; на &quot;0&quot;, но еще не сквитированные
				<ul>
					<li>Можно сквитировать, тогда они уйдут из списка</li>
				</ul>
				</li>
			</ul>
			</li>
		</ul>
		</li>
	</ul>
	</li>
	<li><strong>Page | Список На подтверждение</strong> (Для Инженеров)
	<ul>
		<li>Окно открывается кликом по иконке в стоке статуса, Иконка &quot;горит&quot; когда в списке есть записи</li>
		<li>Фильтрация</li>
		<li>Просмотр отчета перед подтверждением</li>
		<li>Факт подтверждения логируется в общую историю</li>
	</ul>
	</li>
	<li><strong>Widget | Редактор Работ</strong>
	<ul>
		<li>Форма для редактирования одной записи Работ</li>
		<li>Нужно определить какие поля доступны в режиме редактирования уже созданных работ
		<ul>
			<li>Для Статуса Planned: Больше доступно</li>
			<li>Для остальных статусов: Меньше доступно</li>
		</ul>
		</li>
	</ul>
	</li>
	<li><strong>Page | Навигатор</strong>&nbsp;/ Видов работ
	<ul>
		<li>Показать вложенным списком (treeview)
		<ul>
			<li>Поиск и(или) фильтр</li>
		</ul>
		</li>
		<li>Добавление /&nbsp;Удаление / редактирование полей</li>
		<li>Дублирование</li>
		<li>Выбранную работу править в форме&nbsp;<strong>Редактор Работ</strong></li>
		<li>Глубину вложенности ограничить настройкой из конфиг файла (предлагаю 3..5)</li>
	</ul>
	</li>
</ul>

<ol start="6">
	<li>
	<h2>В будущих версиях</h2>
	</li>
</ol>

<ul>
	<li><strong>Фронтенд</strong>

	<ul>
		<li><strong>Page | Список На подтверждение</strong> (Для Инженеров)

		<ul>
			<li>Массовое подтверждение - если будет запрос от заказчика
			<ul>
				<li>Выбраем несколько на подтверждение</li>
				<li>Жмем подвердить</li>
				<li>Очеты работ открываются для просмотра поочередно
				<ul>
					<li>Есть кнопки Подтвердить / Отклонить</li>
					<li>Оба варианта требуют комментария</li>
				</ul>
				</li>
			</ul>
			</li>
		</ul>
		</li>
	</ul>
	</li>
	<li><strong>Архитектура</strong>
	<ul>
		<li><strong>Работа</strong>
		<ul>
			<li>Зависит от (что бы указать блокирующие задачи)</li>
		</ul>
		</li>
		<li><strong>Закупку</strong> (Список деталей с артикулами и необходимыми для закупки характеристиками)
		<ul>
			<li>Запись закупки
			<ul>
				<li>Статус (Формирование / Отправлено / Закрыто)&nbsp;</li>
			</ul>
			</li>
		</ul>
		</li>
		<li><strong>Оборудование</strong> (дерево)
		<ul>
			<li>Перетаскивание узлов дерева (на фронтенде)</li>
			<li>Сложные связи
			<ul>
				<li>Дополнительные ссылки (связи с родителями)</li>
				<li>На фронтенде узел будет виден (в виде ссылки с иконкой и tultip показывает кто Original) во всех узлах куда есть ссылки</li>
				<li>На логику ссылки не влияют - но это не факт что получится</li>
				<li>Удаление ссылки - удаленный узел больше не виден в родителе, но остался в фактическом родителе (удаление происходит с уведомлением пользователя об этом)</li>
				<li>Удаление из фактического родителя приведет к удалению элемента и всех егно ссылок (удаление происходит с уведомлением пользователя об этом)
				<ul>
					<li>Ссылки можно хранить массивом в записи элемента - тогда процесс удаления проще</li>
				</ul>
				</li>
				<li>Вопрос как расчитывать агрегатные значения при наличии ссылки</li>
			</ul>
			</li>
			<li>Downtime - допустимое время простоя</li>
			<li>Статус
			<ul>
				<li>По умолчанию оборудование имеет статус <em><strong>Active</strong></em></li>
				<li><em><strong>Archived</strong></em> - не отображаются в дереве оборудования
				<ul>
					<li>Если оборудование удалено пользователем
					<ul>
						<li>Переводим статус удаленного узла и всех дочерних из <em><strong>Active</strong></em>&nbsp;в&nbsp;<em><strong>Archived</strong></em></li>
						<li>Связанные <em><strong>События</strong></em>, <em><strong>Работы</strong></em> и <em><strong>Отчеты</strong></em> - остаются и отображаются</li>
					</ul>
					</li>
				</ul>
				</li>
				<li><strong>Service</strong>&nbsp;- Вывод в ремонт, ТО</li>
				<li>
				<p data-pm-slice="0 0 []"><strong>Shutdown</strong> - Останов</p>
				</li>
			</ul>
			</li>
		</ul>
		</li>
	</ul>
	</li>
</ul>
